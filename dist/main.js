(()=>{let e=[],t=[],l="main";const n=document.getElementById("folderContainer"),a=document.getElementById("content"),d=document.getElementById("newFolder"),c=document.getElementById("mainFolder"),s=document.getElementById("newTask"),i=(document.getElementById("contentDate"),document.getElementById("newFolderForm")),o=document.getElementById("createFolder"),r=document.getElementById("cancelFolder"),m=document.getElementById("folderName"),u=document.getElementById("folderDate"),g=document.getElementById("form"),p=document.getElementById("formTitle"),v=document.getElementById("formNote"),E=(document.getElementById("formDate"),document.getElementById("cancelForm"));s.addEventListener("click",(()=>{g.classList.toggle("visible");const e=document.createElement("input");e.setAttribute("type","submit"),e.className="formBtn",e.id="submitBtn",e.value="Save",e.addEventListener("click",(t=>{""!=p.value&&(t.preventDefault(),I(),C(),g.reset(),g.classList.toggle("visible"),e.remove())})),g.appendChild(e)})),d.addEventListener("click",(()=>{newFolderForm.classList.toggle("visible")})),o.addEventListener("click",(e=>{e.preventDefault(),newFolderForm.classList.toggle("visible"),t.push({name:m.value,date:u.value}),b(m.value,u.value),N(),i.reset()})),r.addEventListener("click",(()=>{i.reset(),newFolderForm.classList.toggle("visible")})),E.addEventListener("click",(()=>{const e=document.getElementById("submitBtn"),t=document.getElementById("updateBtn");null!==e&&e.remove(),null!==t&&t.remove(),g.classList.toggle("visible"),g.reset()})),c.addEventListener("click",(e=>{l="main",y(e),A()}));const L=e=>{const l=t.indexOf(e.target.id);t.splice(l,1),document.getElementById(e.target.parentNode.id).remove(),localStorage.removeItem(e.target.id),N()},b=(e,t)=>{const d=document.createElement("div"),c=document.createElement("p"),s=document.createElement("p");c.innerHTML="clear",c.className="closeout",c.classList.add("material-icons"),c.classList.add("md-18"),c.id=e,c.addEventListener("click",L),d.setAttribute("data-date",`${t}`),d.getAttribute("data-date"),d.id=e+"folder",d.innerText=e,d.className="folderTab",d.classList.add("tabFont"),d.addEventListener("click",(t=>{d.classList.toggle("tabActive"),l=e,y(t),A()})),s.className="dueDate",s.innertText=t,n.appendChild(d),d.appendChild(c),a.appendChild(s)},y=e=>{document.querySelectorAll(".folderTab").forEach((e=>e.classList.remove("tabActive"))),e.target.classList.add("tabActive")},B=()=>{let t,l=e.length;for(t=0;t<l;t++){const l=document.createElement("div"),n=document.createElement("p"),d=document.createElement("p"),c=document.createElement("p"),s=document.createElement("p"),i=document.createElement("input"),o=document.createElement("input"),r=document.createElement("input");l.classList="card",n.className="cardTitle",n.innerText=e[t].title,c.className="cardText",c.innerText=e[t].note,d.className="collapsible",d.addEventListener("click",(()=>{l.classList.toggle("expand"),d.classList.toggle("active")})),i.setAttribute("type","checkbox"),i.className="checkbox",i.addEventListener("click",(()=>{n.classList.toggle("strikeout")})),r.setAttribute("type","button"),r.className="btn",r.value="edit",r.id=t,r.addEventListener("click",f),o.setAttribute("type","button"),o.className="btn",o.value="delete",o.id=t,o.addEventListener("click",h),a.appendChild(l),l.appendChild(i),l.appendChild(n),l.appendChild(d),l.appendChild(c),l.appendChild(s),l.appendChild(r),l.appendChild(o)}},I=()=>{const t={title:p.value,note:v.value,complete:!1};e.unshift(t),B()},f=t=>{const l=t.target.id,n=e[l],a=document.createElement("input");p.value=n.title,v.value=n.note,a.setAttribute("type","submit"),a.className="formBtn",a.id="updateBtn",a.value="update",a.addEventListener("click",(e=>{e.preventDefault(),n.title=p.value,n.note=v.value,C(),a.remove(),g.classList.toggle("visible"),g.reset()})),g.classList.toggle("visible"),g.appendChild(a)},h=t=>{e.splice(t.target.id,1),C()},k=()=>{a.querySelectorAll(".card").forEach((e=>e.remove()))},N=()=>{const e=JSON.stringify(t);localStorage.setItem("userFolder",e)},F=t=>{const l=JSON.parse(localStorage.getItem(t));null!==l&&e.push(...l)},C=()=>{k(),B(),((e,t)=>{const l=JSON.stringify(t);localStorage.setItem(e,l)})(l,e)},A=()=>{e=[],k(),F(l),B()};window.addEventListener("load",(()=>{(()=>{const e=JSON.parse(localStorage.getItem("userFolder"));null!==e&&t.push(...e)})(),(()=>{let e,l=t.length;for(e=0;e<l;e++)b(t[e].name,t[e].date)})(),F(l),B(),c.classList.add("tabActive")}))})();